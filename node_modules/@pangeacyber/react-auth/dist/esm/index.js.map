{"version":3,"file":"index.js","sources":["../../src/AuthNClient/index.ts","../../node_modules/lodash/_arrayReduce.js","../../node_modules/lodash/_basePropertyOf.js","../../node_modules/lodash/_deburrLetter.js","../../node_modules/lodash/_root.js","../../node_modules/lodash/_freeGlobal.js","../../node_modules/lodash/_Symbol.js","../../node_modules/lodash/_arrayMap.js","../../node_modules/lodash/isArray.js","../../node_modules/lodash/_getRawTag.js","../../node_modules/lodash/_objectToString.js","../../node_modules/lodash/_baseGetTag.js","../../node_modules/lodash/isObjectLike.js","../../node_modules/lodash/isSymbol.js","../../node_modules/lodash/_baseToString.js","../../node_modules/lodash/toString.js","../../node_modules/lodash/deburr.js","../../node_modules/lodash/_asciiWords.js","../../node_modules/lodash/_hasUnicodeWord.js","../../node_modules/lodash/_unicodeWords.js","../../node_modules/lodash/words.js","../../node_modules/lodash/_createCompounder.js","../../node_modules/lodash/snakeCase.js","../../src/shared/utils.ts","../../src/shared/session.ts","../../src/shared/hooks.ts","../../src/AuthProvider/index.tsx","../../src/ComponentAuthProvider/index.tsx","../../src/AuthNFlow/types.ts","../../src/AuthNFlow/client.ts","../../src/AuthNFlow/provider.tsx"],"sourcesContent":["import axios from \"axios\";\nconst API_VERSION = \"v1\";\nexport class AuthNClient {\n    constructor(config, useJwt = false) {\n        if (!config.clientToken)\n            throw new Error(\"A token is required\");\n        if (!config.domain)\n            throw new Error(\"A domain is required\");\n        if (!config.callbackUri && typeof window !== \"undefined\") {\n            config.callbackUri = window.location.origin;\n        }\n        this.config = {\n            ...config,\n        };\n    }\n    /*\n      General AuthN functions\n    */\n    async logout(userToken) {\n        const path = \"client/session/logout\";\n        const data = { token: userToken };\n        return await this.post(path, data);\n    }\n    async validate(userToken) {\n        const path = \"client/token/check\";\n        const payload = { token: userToken };\n        return await this.post(path, payload);\n    }\n    async userinfo(code) {\n        const path = \"client/userinfo\";\n        const payload = { code: code };\n        return await this.post(path, payload);\n    }\n    async refresh(userToken, refreshToken) {\n        const path = \"client/session/refresh\";\n        const payload = { user_token: userToken, refresh_token: refreshToken };\n        return await this.post(path, payload);\n    }\n    async jwks() {\n        const path = \"client/jwks\";\n        return await this.post(path, {});\n    }\n    /*\n      API Request functions\n    */\n    async post(endpoint, payload) {\n        try {\n            const response = await axios.post(this.getUrl(endpoint), payload, this.getOptions());\n            const success = response.data?.status === \"Success\";\n            return { success, response: response.data };\n        }\n        catch (err) {\n            return { success: false, response: this.getError(err) };\n        }\n    }\n    getUrl(endpoint) {\n        const protocol = this.config.domain.match(/^local\\.?host(:\\d{2,5})?$/)\n            ? \"http\"\n            : \"https\";\n        return `${protocol}://authn.${this.config.domain}/${API_VERSION}/${endpoint}`;\n    }\n    getOptions() {\n        const options = {\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: `Bearer ${this.config.clientToken}`,\n            },\n        };\n        return options;\n    }\n    getError(error) {\n        const message = {\n            status: \"Error\",\n            summary: \"\",\n            result: {},\n        };\n        if (axios.isAxiosError(error) && error.response) {\n            message.status = error.response.data.status;\n            message.summary = error.response.data.summary;\n            message.result = error.response.data.result;\n        }\n        else if (error.request) {\n            message.summary = `${error.request.status} ${error.request.statusText}`;\n            message.result = error.reqest;\n        }\n        else {\n            message.summary = \"Unhandled error\";\n            message.result = error;\n            console.log(\"Unhandled error\", error);\n        }\n        return message;\n    }\n}\nexport default AuthNClient;\n","/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayReduce;\n","/**\n * The base implementation of `_.propertyOf` without support for deep paths.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyOf(object) {\n  return function(key) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = basePropertyOf;\n","var basePropertyOf = require('./_basePropertyOf');\n\n/** Used to map Latin Unicode letters to basic Latin letters. */\nvar deburredLetters = {\n  // Latin-1 Supplement block.\n  '\\xc0': 'A',  '\\xc1': 'A', '\\xc2': 'A', '\\xc3': 'A', '\\xc4': 'A', '\\xc5': 'A',\n  '\\xe0': 'a',  '\\xe1': 'a', '\\xe2': 'a', '\\xe3': 'a', '\\xe4': 'a', '\\xe5': 'a',\n  '\\xc7': 'C',  '\\xe7': 'c',\n  '\\xd0': 'D',  '\\xf0': 'd',\n  '\\xc8': 'E',  '\\xc9': 'E', '\\xca': 'E', '\\xcb': 'E',\n  '\\xe8': 'e',  '\\xe9': 'e', '\\xea': 'e', '\\xeb': 'e',\n  '\\xcc': 'I',  '\\xcd': 'I', '\\xce': 'I', '\\xcf': 'I',\n  '\\xec': 'i',  '\\xed': 'i', '\\xee': 'i', '\\xef': 'i',\n  '\\xd1': 'N',  '\\xf1': 'n',\n  '\\xd2': 'O',  '\\xd3': 'O', '\\xd4': 'O', '\\xd5': 'O', '\\xd6': 'O', '\\xd8': 'O',\n  '\\xf2': 'o',  '\\xf3': 'o', '\\xf4': 'o', '\\xf5': 'o', '\\xf6': 'o', '\\xf8': 'o',\n  '\\xd9': 'U',  '\\xda': 'U', '\\xdb': 'U', '\\xdc': 'U',\n  '\\xf9': 'u',  '\\xfa': 'u', '\\xfb': 'u', '\\xfc': 'u',\n  '\\xdd': 'Y',  '\\xfd': 'y', '\\xff': 'y',\n  '\\xc6': 'Ae', '\\xe6': 'ae',\n  '\\xde': 'Th', '\\xfe': 'th',\n  '\\xdf': 'ss',\n  // Latin Extended-A block.\n  '\\u0100': 'A',  '\\u0102': 'A', '\\u0104': 'A',\n  '\\u0101': 'a',  '\\u0103': 'a', '\\u0105': 'a',\n  '\\u0106': 'C',  '\\u0108': 'C', '\\u010a': 'C', '\\u010c': 'C',\n  '\\u0107': 'c',  '\\u0109': 'c', '\\u010b': 'c', '\\u010d': 'c',\n  '\\u010e': 'D',  '\\u0110': 'D', '\\u010f': 'd', '\\u0111': 'd',\n  '\\u0112': 'E',  '\\u0114': 'E', '\\u0116': 'E', '\\u0118': 'E', '\\u011a': 'E',\n  '\\u0113': 'e',  '\\u0115': 'e', '\\u0117': 'e', '\\u0119': 'e', '\\u011b': 'e',\n  '\\u011c': 'G',  '\\u011e': 'G', '\\u0120': 'G', '\\u0122': 'G',\n  '\\u011d': 'g',  '\\u011f': 'g', '\\u0121': 'g', '\\u0123': 'g',\n  '\\u0124': 'H',  '\\u0126': 'H', '\\u0125': 'h', '\\u0127': 'h',\n  '\\u0128': 'I',  '\\u012a': 'I', '\\u012c': 'I', '\\u012e': 'I', '\\u0130': 'I',\n  '\\u0129': 'i',  '\\u012b': 'i', '\\u012d': 'i', '\\u012f': 'i', '\\u0131': 'i',\n  '\\u0134': 'J',  '\\u0135': 'j',\n  '\\u0136': 'K',  '\\u0137': 'k', '\\u0138': 'k',\n  '\\u0139': 'L',  '\\u013b': 'L', '\\u013d': 'L', '\\u013f': 'L', '\\u0141': 'L',\n  '\\u013a': 'l',  '\\u013c': 'l', '\\u013e': 'l', '\\u0140': 'l', '\\u0142': 'l',\n  '\\u0143': 'N',  '\\u0145': 'N', '\\u0147': 'N', '\\u014a': 'N',\n  '\\u0144': 'n',  '\\u0146': 'n', '\\u0148': 'n', '\\u014b': 'n',\n  '\\u014c': 'O',  '\\u014e': 'O', '\\u0150': 'O',\n  '\\u014d': 'o',  '\\u014f': 'o', '\\u0151': 'o',\n  '\\u0154': 'R',  '\\u0156': 'R', '\\u0158': 'R',\n  '\\u0155': 'r',  '\\u0157': 'r', '\\u0159': 'r',\n  '\\u015a': 'S',  '\\u015c': 'S', '\\u015e': 'S', '\\u0160': 'S',\n  '\\u015b': 's',  '\\u015d': 's', '\\u015f': 's', '\\u0161': 's',\n  '\\u0162': 'T',  '\\u0164': 'T', '\\u0166': 'T',\n  '\\u0163': 't',  '\\u0165': 't', '\\u0167': 't',\n  '\\u0168': 'U',  '\\u016a': 'U', '\\u016c': 'U', '\\u016e': 'U', '\\u0170': 'U', '\\u0172': 'U',\n  '\\u0169': 'u',  '\\u016b': 'u', '\\u016d': 'u', '\\u016f': 'u', '\\u0171': 'u', '\\u0173': 'u',\n  '\\u0174': 'W',  '\\u0175': 'w',\n  '\\u0176': 'Y',  '\\u0177': 'y', '\\u0178': 'Y',\n  '\\u0179': 'Z',  '\\u017b': 'Z', '\\u017d': 'Z',\n  '\\u017a': 'z',  '\\u017c': 'z', '\\u017e': 'z',\n  '\\u0132': 'IJ', '\\u0133': 'ij',\n  '\\u0152': 'Oe', '\\u0153': 'oe',\n  '\\u0149': \"'n\", '\\u017f': 's'\n};\n\n/**\n * Used by `_.deburr` to convert Latin-1 Supplement and Latin Extended-A\n * letters to basic Latin letters.\n *\n * @private\n * @param {string} letter The matched letter to deburr.\n * @returns {string} Returns the deburred letter.\n */\nvar deburrLetter = basePropertyOf(deburredLetters);\n\nmodule.exports = deburrLetter;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","var deburrLetter = require('./_deburrLetter'),\n    toString = require('./toString');\n\n/** Used to match Latin Unicode letters (excluding mathematical operators). */\nvar reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\n\n/** Used to compose unicode character classes. */\nvar rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange;\n\n/** Used to compose unicode capture groups. */\nvar rsCombo = '[' + rsComboRange + ']';\n\n/**\n * Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks) and\n * [combining diacritical marks for symbols](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks_for_Symbols).\n */\nvar reComboMark = RegExp(rsCombo, 'g');\n\n/**\n * Deburrs `string` by converting\n * [Latin-1 Supplement](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)\n * and [Latin Extended-A](https://en.wikipedia.org/wiki/Latin_Extended-A)\n * letters to basic Latin letters and removing\n * [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to deburr.\n * @returns {string} Returns the deburred string.\n * @example\n *\n * _.deburr('déjà vu');\n * // => 'deja vu'\n */\nfunction deburr(string) {\n  string = toString(string);\n  return string && string.replace(reLatin, deburrLetter).replace(reComboMark, '');\n}\n\nmodule.exports = deburr;\n","/** Used to match words composed of alphanumeric characters. */\nvar reAsciiWord = /[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g;\n\n/**\n * Splits an ASCII `string` into an array of its words.\n *\n * @private\n * @param {string} The string to inspect.\n * @returns {Array} Returns the words of `string`.\n */\nfunction asciiWords(string) {\n  return string.match(reAsciiWord) || [];\n}\n\nmodule.exports = asciiWords;\n","/** Used to detect strings that need a more robust regexp to match words. */\nvar reHasUnicodeWord = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;\n\n/**\n * Checks if `string` contains a word composed of Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a word is found, else `false`.\n */\nfunction hasUnicodeWord(string) {\n  return reHasUnicodeWord.test(string);\n}\n\nmodule.exports = hasUnicodeWord;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsDingbatRange = '\\\\u2700-\\\\u27bf',\n    rsLowerRange = 'a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff',\n    rsMathOpRange = '\\\\xac\\\\xb1\\\\xd7\\\\xf7',\n    rsNonCharRange = '\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf',\n    rsPunctuationRange = '\\\\u2000-\\\\u206f',\n    rsSpaceRange = ' \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000',\n    rsUpperRange = 'A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde',\n    rsVarRange = '\\\\ufe0e\\\\ufe0f',\n    rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;\n\n/** Used to compose unicode capture groups. */\nvar rsApos = \"['\\u2019]\",\n    rsBreak = '[' + rsBreakRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsDigits = '\\\\d+',\n    rsDingbat = '[' + rsDingbatRange + ']',\n    rsLower = '[' + rsLowerRange + ']',\n    rsMisc = '[^' + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsUpper = '[' + rsUpperRange + ']',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar rsMiscLower = '(?:' + rsLower + '|' + rsMisc + ')',\n    rsMiscUpper = '(?:' + rsUpper + '|' + rsMisc + ')',\n    rsOptContrLower = '(?:' + rsApos + '(?:d|ll|m|re|s|t|ve))?',\n    rsOptContrUpper = '(?:' + rsApos + '(?:D|LL|M|RE|S|T|VE))?',\n    reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsOrdLower = '\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])',\n    rsOrdUpper = '\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsEmoji = '(?:' + [rsDingbat, rsRegional, rsSurrPair].join('|') + ')' + rsSeq;\n\n/** Used to match complex or compound words. */\nvar reUnicodeWord = RegExp([\n  rsUpper + '?' + rsLower + '+' + rsOptContrLower + '(?=' + [rsBreak, rsUpper, '$'].join('|') + ')',\n  rsMiscUpper + '+' + rsOptContrUpper + '(?=' + [rsBreak, rsUpper + rsMiscLower, '$'].join('|') + ')',\n  rsUpper + '?' + rsMiscLower + '+' + rsOptContrLower,\n  rsUpper + '+' + rsOptContrUpper,\n  rsOrdUpper,\n  rsOrdLower,\n  rsDigits,\n  rsEmoji\n].join('|'), 'g');\n\n/**\n * Splits a Unicode `string` into an array of its words.\n *\n * @private\n * @param {string} The string to inspect.\n * @returns {Array} Returns the words of `string`.\n */\nfunction unicodeWords(string) {\n  return string.match(reUnicodeWord) || [];\n}\n\nmodule.exports = unicodeWords;\n","var asciiWords = require('./_asciiWords'),\n    hasUnicodeWord = require('./_hasUnicodeWord'),\n    toString = require('./toString'),\n    unicodeWords = require('./_unicodeWords');\n\n/**\n * Splits `string` into an array of its words.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to inspect.\n * @param {RegExp|string} [pattern] The pattern to match words.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Array} Returns the words of `string`.\n * @example\n *\n * _.words('fred, barney, & pebbles');\n * // => ['fred', 'barney', 'pebbles']\n *\n * _.words('fred, barney, & pebbles', /[^, ]+/g);\n * // => ['fred', 'barney', '&', 'pebbles']\n */\nfunction words(string, pattern, guard) {\n  string = toString(string);\n  pattern = guard ? undefined : pattern;\n\n  if (pattern === undefined) {\n    return hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);\n  }\n  return string.match(pattern) || [];\n}\n\nmodule.exports = words;\n","var arrayReduce = require('./_arrayReduce'),\n    deburr = require('./deburr'),\n    words = require('./words');\n\n/** Used to compose unicode capture groups. */\nvar rsApos = \"['\\u2019]\";\n\n/** Used to match apostrophes. */\nvar reApos = RegExp(rsApos, 'g');\n\n/**\n * Creates a function like `_.camelCase`.\n *\n * @private\n * @param {Function} callback The function to combine each word.\n * @returns {Function} Returns the new compounder function.\n */\nfunction createCompounder(callback) {\n  return function(string) {\n    return arrayReduce(words(deburr(string).replace(reApos, '')), callback, '');\n  };\n}\n\nmodule.exports = createCompounder;\n","var createCompounder = require('./_createCompounder');\n\n/**\n * Converts `string` to\n * [snake case](https://en.wikipedia.org/wiki/Snake_case).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the snake cased string.\n * @example\n *\n * _.snakeCase('Foo Bar');\n * // => 'foo_bar'\n *\n * _.snakeCase('fooBar');\n * // => 'foo_bar'\n *\n * _.snakeCase('--FOO-BAR--');\n * // => 'foo_bar'\n */\nvar snakeCase = createCompounder(function(result, word, index) {\n  return result + (index ? '_' : '') + word.toLowerCase();\n});\n\nmodule.exports = snakeCase;\n","// Copyright 2023 Pangea Cyber Corporation\n// Author: Pangea Cyber Corporation\nimport snakeCase from \"lodash/snakeCase\";\nconst BASE58_ALPHABET = \"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz\";\nexport const generateBase58 = (length) => {\n    let result = \"\";\n    const setLength = BASE58_ALPHABET.length;\n    for (let i = 0; i < length; i++) {\n        result += BASE58_ALPHABET.charAt(Math.floor(Math.random() * setLength));\n    }\n    return result;\n};\nconst bytesToHex = (uint8a) => {\n    let hex = \"\";\n    for (let i = 0; i < uint8a.length; i++) {\n        hex += uint8a[i].toString(16).padStart(2, \"0\");\n    }\n    return hex;\n};\nexport const encode58 = (source) => {\n    if (source.length === 0)\n        return \"\";\n    if (typeof source === \"string\") {\n        if (typeof TextEncoder !== \"undefined\") {\n            source = new TextEncoder().encode(source);\n        }\n        else {\n            source = new Uint8Array(source.split(\"\").map((c) => c.charCodeAt(0)));\n        }\n    }\n    let x = BigInt(\"0x\" + bytesToHex(source));\n    const output = [];\n    while (x > 0) {\n        const mod = Number(x % 58n);\n        x = x / 58n;\n        output.push(BASE58_ALPHABET[mod]);\n    }\n    for (let i = 0; source[i] === 0; i++) {\n        output.push(BASE58_ALPHABET[0]);\n    }\n    return output.reverse().join(\"\");\n};\nexport const toUrlEncoded = (obj) => {\n    return Object.keys(obj)\n        .map((k) => encodeURIComponent(snakeCase(k)) + \"=\" + encodeURIComponent(obj[k]))\n        .join(\"&\");\n};\n/**\n * isLocalhost - helper function to determine if a hostname is localhost\n * @param hostname {string}\n * @returns {boolean}\n * @example\n * isLocalhost(\"pangea.cloud\");\n * // false\n *\n * isLocalhost(\"127.0.0.1\");\n * // true\n */\nexport const isLocalhost = (hostname) => {\n    if (hostname === \"localhost\" || hostname === \"127.0.0.1\") {\n        return true;\n    }\n    return false;\n};\nexport const diffInSeconds = (dt1, dt2) => {\n    const diff = (dt1.getTime() - dt2.getTime()) / 1000;\n    return Math.round(diff);\n};\nexport const delay = (ms) => {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n};\n","import { isLocalhost, diffInSeconds } from \"./utils\";\nexport const REFRESH_CHECK_INTERVAL = 15; // Frequency of refresh check in seconds\nexport const REFRESH_CHECK_THRESHOLD = 10;\nexport const SESSION_DATA_KEY = \"pangea-session\";\nexport const TOKEN_COOKIE_NAME = \"pangea-token\";\nexport const REFRESH_COOKIE_NAME = \"pangea-refresh\";\nexport const DEFAULT_COOKIE_OPTIONS = {\n    useCookie: false,\n    cookieMaxAge: 60 * 60 * 24 * 2,\n    cookieName: TOKEN_COOKIE_NAME,\n    refreshCookieName: REFRESH_COOKIE_NAME,\n};\nconst BASE_COOKIE_FLAGS = \"; path=/\";\nconst CODE_RE = /[?&]code=[^&]+/;\nconst STATE_RE = /[?&]state=[^&]+/;\nexport const hasAuthParams = (searchParams = window.location.search) => CODE_RE.test(searchParams) && STATE_RE.test(searchParams);\n/*\n  Session storage functions\n*/\nexport function getStorageAPI(isUsingCookies) {\n    // Depending on if we're using cookies or not, we want to use a different storage Web API\n    // When we use a cookie, use session storage\n    // When we do not use a cookie, use local storage <--- default\n    return isUsingCookies ? window.sessionStorage : window.localStorage;\n}\nexport const saveSessionData = (data, options) => {\n    const storageAPI = getStorageAPI(options.useCookie);\n    const dataString = JSON.stringify(data);\n    storageAPI.setItem(options.sessionKey, dataString);\n};\nexport const getSessionData = (options) => {\n    const storageAPI = getStorageAPI(options.useCookie);\n    const data = storageAPI.getItem(options.sessionKey);\n    const sessionJSON = data ? JSON.parse(data) : {};\n    return sessionJSON;\n};\nexport const getSessionToken = (options) => {\n    if (options.useCookie) {\n        return getTokenFromCookie(options.cookieName);\n    }\n    const data = getSessionData(options);\n    return data?.user?.active_token?.token;\n};\nexport const getRefreshToken = (options) => {\n    if (options.useCookie) {\n        return getTokenFromCookie(options.refreshCookieName);\n    }\n    else {\n        const data = getSessionData(options);\n        return data?.user?.refresh_token?.token;\n    }\n};\nexport const getAllTokens = (options) => {\n    const sessionToken = getSessionToken(options) || \"\";\n    const refreshToken = getRefreshToken(options) || \"\";\n    return { sessionToken, refreshToken };\n};\nexport const getSessionTokenValues = (options) => {\n    if (options.useCookie) {\n        return getTokenCookieFields(options.cookieName);\n    }\n    const data = getSessionData(options);\n    return [\n        data?.user?.refresh_token?.token || \"\",\n        data?.user?.refresh_token?.expire || \"\",\n    ];\n};\nexport const getTokenCookieFields = (name) => {\n    const cookies = getCookies();\n    const cookie = cookies[name] || \"\";\n    const [token, expire] = cookie.split(\",\");\n    return [token || \"\", expire || \"\"];\n};\n/*\n  Support for fetching a token by name\n*/\nexport const getTokenFromCookie = (name) => {\n    const cookies = getCookies();\n    const cookie = cookies[name];\n    // token cookie should contain the value and expiration timestamp separated by a comma\n    if (cookie) {\n        const [token] = cookie.split(\",\");\n        return token || \"\";\n    }\n    else {\n        return \"\";\n    }\n};\n/*\n  Token refresh functions\n*/\n// Get the expire value of the session token, from cookie or storage\nexport const getTokenExpire = (options) => {\n    if (options.useCookie) {\n        const [_, expire] = getTokenCookieFields(options.cookieName);\n        return expire;\n    }\n    else {\n        const sessionData = getSessionData(options);\n        const user = sessionData.user;\n        return user?.refresh_token?.expire || \"\";\n    }\n};\nexport const isTokenExpiring = (expireTime) => {\n    const refreshExpires = new Date(expireTime);\n    const timeDiff = diffInSeconds(refreshExpires, new Date());\n    const threshold = REFRESH_CHECK_INTERVAL + REFRESH_CHECK_THRESHOLD;\n    return timeDiff < threshold;\n};\n/*\n  Cookie functions\n*/\nexport const maybeAddSecureFlag = (cookie, options) => {\n    const { cookieDomain } = options;\n    // Check the location.hostname\n    // if we're not at localhost, then add the Secure flag\n    // and also set the domain\n    if (!isLocalhost(window.location.hostname)) {\n        cookie += \"; Secure\";\n        // If we include a cookieDomain, then make sure to set it\n        // on the cookie\n        if (cookieDomain !== undefined) {\n            cookie += `; domain=${cookieDomain}`;\n        }\n    }\n    return cookie;\n};\nexport const getCookies = () => {\n    const cookies = document.cookie\n        .split(\";\")\n        .map((str) => str.trim())\n        .reduce((cookieObj, curr) => {\n        const [cookieName, cookieValue] = curr.split(\"=\");\n        if (cookieName !== \"\") {\n            cookieObj[cookieName] = cookieValue;\n        }\n        return cookieObj;\n    }, {});\n    return cookies;\n};\nexport const setCookie = (key, value = \"\", options) => {\n    const { cookieMaxAge } = options;\n    let cookie = `${key}=${value}${BASE_COOKIE_FLAGS}; max-age=${cookieMaxAge}`;\n    cookie = maybeAddSecureFlag(cookie, options);\n    document.cookie = cookie;\n};\nexport const removeCookie = (key, options) => {\n    const epoch = new Date(0);\n    let cookie = `${key}=${BASE_COOKIE_FLAGS}; expires=${epoch.toUTCString()}; max-age=0`;\n    cookie = maybeAddSecureFlag(cookie, options);\n    document.cookie = cookie;\n};\nexport const setTokenCookies = (userData, options) => {\n    const userToken = userData.active_token?.token || \"\";\n    const refreshToken = userData.refresh_token?.token || \"\";\n    const userExpire = userData.active_token?.expire || \"\";\n    const refreshExpire = userData.refresh_token?.expire || \"\";\n    const userCookieValue = `${userToken},${userExpire}`;\n    const refreshCookieValue = `${refreshToken},${refreshExpire}`;\n    setCookie(options.cookieName, userCookieValue, options);\n    setCookie(options.refreshCookieName, refreshCookieValue, options);\n};\nexport const removeTokenCookies = (options) => {\n    removeCookie(options.cookieName, options);\n    removeCookie(options.refreshCookieName, options);\n};\nexport const getUserFromResponse = (data) => {\n    // The token/check endpoint returns a different format thean userinfo and flow/complete\n    // Data only includes the active_token information in response.result\n    // TODO: need a fix for this for cookie sessions and refresh token support\n    const activeToken = data.result?.active_token?.token\n        ? { ...data.result.active_token }\n        : { ...data.result };\n    const refreshToken = data.result?.refresh_token?.token\n        ? { ...data.result.refresh_token }\n        : {};\n    const email = activeToken.email;\n    const profile = { ...activeToken.profile };\n    // remove deplicate user data from tokens\n    delete activeToken.email;\n    delete activeToken.profile;\n    delete refreshToken.email;\n    delete refreshToken.profile;\n    const user = {\n        email: email,\n        profile: profile,\n        active_token: activeToken,\n        refresh_token: refreshToken,\n    };\n    return user;\n};\n","import { useCallback, useEffect, useRef } from \"react\";\nimport * as jose from \"jose\";\nimport { getAllTokens, getSessionData, getTokenExpire, getUserFromResponse, isTokenExpiring, removeTokenCookies, saveSessionData, setTokenCookies, } from \"@src/shared/session\";\nimport { diffInSeconds } from \"@src/shared/utils\";\nexport const REFRESH_CHECK_INTERVAL = 15; // Frequency of refresh check in seconds\nexport const REFRESH_CHECK_THRESHOLD = 10;\nexport const JWKS_CACHE_KEY = \"jwks-cache\";\nexport const JWKS_EXPIRE = 60 * 60 * 24; // 24 hours in seconds\nexport const useValidateToken = (client, options, validateCallback) => {\n    const fetchJWKS = useCallback(async () => {\n        const { success, response } = await client.jwks();\n        if (success) {\n            if (response.result?.keys && response.result.keys.length > 0) {\n                return { keys: response.result.keys };\n            }\n            else {\n                console.warn(\"Error: empty JWKS response\");\n            }\n        }\n    }, []);\n    const checkKeys = useCallback((jwksJSON) => {\n        if (jwksJSON?.expire) {\n            const cacheExpires = new Date(jwksJSON?.expire);\n            const timeDiff = diffInSeconds(new Date(), cacheExpires);\n            return timeDiff < JWKS_EXPIRE;\n        }\n        return false;\n    }, []);\n    const getJWKS = useCallback(async () => {\n        const jwksData = localStorage.getItem(JWKS_CACHE_KEY);\n        const jwksJSON = JSON.parse(jwksData || \"{}\");\n        if (jwksData && checkKeys(jwksJSON)) {\n            return jwksJSON.keySet;\n        }\n        else {\n            const keySet = await fetchJWKS();\n            if (keySet) {\n                const cacheData = { expire: Date.now(), keySet: keySet };\n                localStorage.setItem(JWKS_CACHE_KEY, JSON.stringify(cacheData));\n                return keySet;\n            }\n            return { keys: [] };\n        }\n    }, []);\n    const verifyJwt = useCallback(async (token) => {\n        const result = {};\n        try {\n            const jwks = await getJWKS();\n            if (jwks?.keys?.length > 0) {\n                const keySet = jose.createLocalJWKSet(jwks);\n                const { payload, protectedHeader } = await jose.jwtVerify(token, keySet);\n                const profile = payload.profile;\n                const user = {\n                    email: payload.email,\n                    profile: {\n                        first_name: profile?.first_name,\n                        last_name: profile?.first_name,\n                        phone: profile?.phone,\n                    },\n                    header: protectedHeader,\n                    payload: payload,\n                };\n                result.user = user;\n            }\n            else {\n                result.error = \"Missing JSON Web Key Set\";\n            }\n        }\n        catch (error) {\n            console.warn(\"Error:\", error);\n            result.error = \"JWT validation failed\";\n        }\n        return result;\n    }, []);\n    const verifyToken = useCallback(async (token) => {\n        const { success, response } = await client.validate(token);\n        const result = {};\n        if (success) {\n            result.user = getUserFromResponse(response);\n        }\n        else {\n            removeTokenCookies(options);\n            result.error = response?.result?.summary || \"Token verification error\";\n        }\n        return result;\n    }, []);\n    const validate = useCallback(async (token) => {\n        const result = options?.useJwt\n            ? await verifyJwt(token)\n            : await verifyToken(token);\n        validateCallback(result);\n        if (result.user) {\n            const data = getSessionData(options);\n            // add tokens to user data\n            if (data) {\n                result.user.active_token = data.user?.active_token;\n                result.user.refresh_token = data.user?.refresh_token;\n            }\n        }\n        return result?.user;\n    }, []);\n    return validate;\n};\nexport const useRefresh = (client, options, refreshCallback, loadingCallback) => {\n    const intervalId = useRef(null);\n    useEffect(() => {\n        // event handlers to start/stop refresh checker\n        window.addEventListener(\"focus\", onFocus);\n        window.addEventListener(\"blur\", onBlur);\n        return () => {\n            window.removeEventListener(\"focus\", onFocus);\n            window.removeEventListener(\"blur\", onBlur);\n            if (intervalId.current) {\n                clearInterval(intervalId.current);\n                intervalId.current = null;\n            }\n        };\n    }, []);\n    const onBlur = useCallback(() => {\n        if (intervalId.current) {\n            clearInterval(intervalId.current);\n            intervalId.current = null;\n        }\n    }, []);\n    const onFocus = useCallback(() => {\n        loadingCallback(true);\n        checkTokenLife();\n        loadingCallback(false);\n        startTokenWatch();\n    }, []);\n    const checkTokenLife = useCallback(() => {\n        const tokenExpire = getTokenExpire(options);\n        if (tokenExpire && isTokenExpiring(tokenExpire)) {\n            refresh();\n        }\n    }, []);\n    const stopTokenWatch = useCallback(() => {\n        if (intervalId.current) {\n            clearInterval(intervalId.current);\n            intervalId.current = null;\n        }\n    }, []);\n    const startTokenWatch = useCallback(() => {\n        const intervalTime = REFRESH_CHECK_INTERVAL * 1000;\n        stopTokenWatch();\n        intervalId.current = window.setInterval(() => {\n            checkTokenLife();\n        }, intervalTime);\n    }, []);\n    const refresh = useCallback(async () => {\n        const { sessionToken, refreshToken } = getAllTokens(options);\n        const { success, response } = await client.refresh(sessionToken, refreshToken);\n        if (success) {\n            const data = getSessionData(options);\n            const user = getUserFromResponse(response);\n            data.user = user;\n            saveSessionData(data, options);\n            if (options.useCookie) {\n                setTokenCookies(user, options);\n            }\n            refreshCallback({ user });\n        }\n        else {\n            refreshCallback({ error: \"Refresh failed\" });\n        }\n    }, []);\n    return { refresh, startTokenWatch, stopTokenWatch };\n};\n","import { Fragment as _Fragment, jsx as _jsx } from \"react/jsx-runtime\";\nimport { createContext, useCallback, useContext, useEffect, useMemo, useState, } from \"react\";\nimport AuthNClient from \"@src/AuthNClient\";\nimport { toUrlEncoded, generateBase58 } from \"../shared/utils\";\nimport { getStorageAPI, getSessionData, getSessionToken, getSessionTokenValues, getUserFromResponse, hasAuthParams, saveSessionData, setTokenCookies, removeTokenCookies, isTokenExpiring, getTokenFromCookie, SESSION_DATA_KEY, DEFAULT_COOKIE_OPTIONS, } from \"@src/shared/session\";\nimport { useValidateToken, useRefresh } from \"../shared/hooks\";\n// const SESSION_DATA_KEY = \"pangea-authn\";\nconst STATE_DATA_KEY = \"state\";\nconst LAST_PATH_KEY = \"last-path\";\nconst AuthContext = createContext({});\nexport const AuthProvider = ({ loginUrl, config, onLogin, cookieOptions = { useCookie: false }, redirectPathname, redirectOnLogout = false, useStrictStateCheck = true, children, }) => {\n    const [authenticated, setAuthenticated] = useState(false);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(\"\");\n    const [user, setUser] = useState();\n    const client = useMemo(() => {\n        return new AuthNClient(config);\n    }, [config]);\n    // For local development, use port 4000 for API and 4001 for hosted UI\n    const slashRe = /\\/$/;\n    const loginURL = `${loginUrl.replace(slashRe, \"\")}/authorize`;\n    const signupURL = `${loginUrl.replace(slashRe, \"\")}/signup`;\n    const logoutURL = `${loginUrl.replace(slashRe, \"\")}/logout`;\n    const options = {\n        useJwt: config.useJwt,\n        sessionKey: config.sessionKey || SESSION_DATA_KEY,\n        ...DEFAULT_COOKIE_OPTIONS,\n        ...cookieOptions,\n    };\n    const validateCallback = useCallback((result) => {\n        if (result.user) {\n            const sessionData = getSessionData(options);\n            setAuthenticated(true);\n            setUser(result.user);\n            if (onLogin) {\n                const appState = {\n                    userData: sessionData.user,\n                    returnPath: window.location.pathname,\n                };\n                onLogin(appState);\n            }\n        }\n        else {\n            setError(result.error || \"Validation failed.\");\n        }\n        setLoading(false);\n    }, []);\n    const refreshCallback = useCallback((result) => {\n        if (result.user) {\n            setUser(result.user);\n            setAuthenticated(true);\n        }\n        else {\n            logout();\n        }\n        setLoading(false);\n    }, []);\n    const loadingCallback = useCallback((state) => {\n        setLoading(state);\n    }, []);\n    const validate = useValidateToken(client, options, validateCallback);\n    const { refresh, startTokenWatch, stopTokenWatch } = useRefresh(client, options, refreshCallback, loadingCallback);\n    useEffect(() => {\n        const [token, expire] = getSessionTokenValues(options);\n        if (hasAuthParams()) {\n            // if code and secret params are set, exchange code for a token\n            exchange();\n        }\n        else if (token) {\n            // if token is expiring or expired, try refreshing\n            if (expire && isTokenExpiring(expire)) {\n                refresh();\n            }\n            else {\n                // if token has not expired, validate that it's still good\n                validate(token);\n            }\n            startTokenWatch();\n        }\n        else {\n            // show unauthenticated state\n            setLoading(false);\n        }\n    }, []);\n    const exchange = async () => {\n        const queryString = window.location.search;\n        const urlParams = new URLSearchParams(queryString);\n        const storageAPI = getStorageAPI(options.useCookie);\n        const savedState = storageAPI.getItem(STATE_DATA_KEY);\n        const state = urlParams.get(\"state\");\n        const code = urlParams.get(\"code\");\n        // remove state and code params from the URL\n        urlParams.delete(\"state\");\n        urlParams.delete(\"code\");\n        const newSearch = urlParams.toString();\n        const newPath = newSearch\n            ? `${window.location.pathname}?${newSearch}`\n            : window.location.pathname;\n        history.pushState({}, document.title, newPath);\n        if (!state || !code) {\n            const msg = \"Missing required parameters\";\n            setError(msg);\n            setLoading(false);\n        }\n        else if (state !== savedState && useStrictStateCheck) {\n            const msg = \"Invalid session state\";\n            setError(msg);\n            setLoading(false);\n        }\n        else {\n            const { success, response } = await client.userinfo(code);\n            if (success) {\n                const token = response.result?.active_token?.token;\n                if (token) {\n                    // if using an opaque token or has a valid JWT\n                    if (!config?.useJwt || (config?.useJwt && (await validate(token)))) {\n                        processLogin(response);\n                    }\n                }\n                else {\n                    const msg = \"Missing Token\";\n                    setError(msg);\n                }\n            }\n            else {\n                setError(response.summary);\n            }\n            storageAPI.removeItem(STATE_DATA_KEY);\n            setLoading(false);\n        }\n    };\n    const login = () => {\n        const location = window.location;\n        const queryString = window.location.search;\n        const urlParams = new URLSearchParams(queryString);\n        const stateCode = generateBase58(32);\n        const storageAPI = getStorageAPI(options.useCookie);\n        storageAPI.setItem(STATE_DATA_KEY, stateCode);\n        storageAPI.setItem(LAST_PATH_KEY, `${location.pathname}${location.search}`);\n        let redirectUri = location.origin;\n        if (typeof redirectPathname === \"string\") {\n            redirectUri += redirectPathname;\n        }\n        const query = new URLSearchParams(\"\");\n        query.append(\"redirect_uri\", redirectUri);\n        query.append(\"state\", stateCode);\n        const queryParams = query.toString();\n        const redirectTo = urlParams.get(\"signup\") ? signupURL : loginURL;\n        const url = queryParams ? `${redirectTo}?${queryParams}` : redirectTo;\n        window.location.replace(url);\n    };\n    const logout = useCallback(async () => {\n        const stateCode = generateBase58(32);\n        // redirect to the hosted page\n        if (redirectOnLogout) {\n            let redirectUri = location.origin;\n            if (typeof redirectPathname === \"string\") {\n                redirectUri += redirectPathname;\n            }\n            const query = {\n                redirectUri,\n                state: stateCode,\n            };\n            const url = `${logoutURL}?${toUrlEncoded(query)}`;\n            setLoggedOut();\n            window.location.replace(url);\n        }\n        // call the logout endpoint\n        else {\n            const userToken = getSessionToken(options);\n            if (userToken) {\n                const { success, response } = await client.logout(userToken);\n                if (success) {\n                    setLoggedOut();\n                }\n                else {\n                    setError(response.summary);\n                }\n            }\n            else {\n                setLoggedOut();\n            }\n        }\n    }, []);\n    const getToken = useCallback(() => {\n        return getSessionToken(options);\n    }, []);\n    const setLoggedOut = () => {\n        if (options.useCookie) {\n            removeTokenCookies(options);\n        }\n        stopTokenWatch();\n        const storageAPI = getStorageAPI(options.useCookie);\n        storageAPI.removeItem(SESSION_DATA_KEY);\n        setError(\"\");\n        setUser(undefined);\n        setAuthenticated(false);\n    };\n    const processLogin = (response) => {\n        const user = getUserFromResponse(response);\n        const sessionData = getSessionData(options);\n        sessionData.user = user;\n        saveSessionData(sessionData, options);\n        const storageAPI = getStorageAPI(options.useCookie);\n        const returnURL = storageAPI.getItem(LAST_PATH_KEY) || \"/\";\n        const appState = {\n            userData: user,\n            returnPath: returnURL,\n            authState: storageAPI.getItem(STATE_DATA_KEY),\n        };\n        storageAPI.removeItem(LAST_PATH_KEY);\n        if (options.useCookie) {\n            setTokenCookies(user, options);\n        }\n        setError(\"\");\n        setUser(user);\n        setAuthenticated(true);\n        startTokenWatch();\n        if (onLogin) {\n            onLogin(appState);\n        }\n    };\n    const memoData = useMemo(() => ({\n        authenticated,\n        loading,\n        error,\n        user,\n        client,\n        login,\n        logout,\n        getToken,\n    }), [authenticated, loading, error, user, client, login, logout, getToken]);\n    return (_jsx(AuthContext.Provider, { value: memoData, children: _jsx(_Fragment, { children: children }) }));\n};\nexport const useAuth = () => {\n    return useContext(AuthContext);\n};\n// Convenience method and for backwards compatibility\nexport { getTokenFromCookie };\n","import { Fragment as _Fragment, jsx as _jsx } from \"react/jsx-runtime\";\nimport { createContext, useCallback, useContext, useEffect, useMemo, useState, } from \"react\";\nimport AuthNClient from \"@src/AuthNClient\";\nimport { hasAuthParams, getSessionData, getSessionToken, getSessionTokenValues, getUserFromResponse, isTokenExpiring, removeTokenCookies, saveSessionData, setTokenCookies, DEFAULT_COOKIE_OPTIONS, SESSION_DATA_KEY, } from \"@src/shared/session\";\nimport { useValidateToken, useRefresh } from \"../shared/hooks\";\nconst AuthContext = createContext({});\nexport const ComponentAuthProvider = ({ config, cookieOptions = { useCookie: false }, children, }) => {\n    const [authenticated, setAuthenticated] = useState(false);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState();\n    const [user, setUser] = useState();\n    const [cbParams, setCbParams] = useState();\n    const client = useMemo(() => {\n        return new AuthNClient(config);\n    }, [config]);\n    const options = {\n        useJwt: config.useJwt,\n        sessionKey: config.sessionKey || SESSION_DATA_KEY,\n        ...DEFAULT_COOKIE_OPTIONS,\n        ...cookieOptions,\n    };\n    const validateCallback = useCallback((result) => {\n        if (result.user) {\n            setAuthenticated(true);\n            setUser(result.user);\n        }\n        else {\n            setLoggedOut();\n        }\n        setLoading(false);\n    }, []);\n    const refreshCallback = useCallback((result) => {\n        if (result.user) {\n            setUser(result.user);\n            setAuthenticated(true);\n        }\n        else {\n            logout();\n        }\n        setLoading(false);\n    }, []);\n    const loadingCallback = useCallback((state) => {\n        setLoading(state);\n    }, []);\n    const validate = useValidateToken(client, options, validateCallback);\n    const { refresh, startTokenWatch, stopTokenWatch } = useRefresh(client, options, refreshCallback, loadingCallback);\n    // load data from local storage, and params from URL\n    useEffect(() => {\n        const [token, expire] = getSessionTokenValues(options);\n        // save callback params if set\n        if (hasAuthParams()) {\n            const queryString = window.location.search;\n            const urlParams = new URLSearchParams(queryString);\n            const state = urlParams.get(\"state\") || \"\";\n            const code = urlParams.get(\"code\") || \"\";\n            setCbParams({ state, code });\n        }\n        if (token) {\n            // if token is expiring or expired, try refreshing\n            if (expire && isTokenExpiring(expire)) {\n                refresh();\n            }\n            else {\n                // if token has not expired, validate that it's still good\n                validate(token);\n            }\n            startTokenWatch();\n        }\n        else {\n            setLoading(false);\n        }\n    }, []);\n    const logout = useCallback(async () => {\n        const userToken = getSessionToken(options);\n        if (userToken) {\n            const { success, response } = await client.logout(userToken);\n            if (success) {\n                setLoggedOut();\n            }\n            else {\n                setError(response);\n            }\n        }\n        else {\n            setLoggedOut();\n        }\n        stopTokenWatch();\n        // eslint-disable-next-line\n    }, [user]);\n    const getToken = useCallback(() => {\n        return getSessionToken(options);\n    }, []);\n    const setLoggedOut = () => {\n        if (options.useCookie) {\n            removeTokenCookies(options);\n        }\n        setError(undefined);\n        setUser(undefined);\n        setAuthenticated(false);\n    };\n    const setFlowComplete = useCallback((response) => {\n        const user = getUserFromResponse(response);\n        const sessionData = getSessionData(options);\n        sessionData.user = user;\n        saveSessionData(sessionData, options);\n        if (options.useCookie) {\n            setTokenCookies(user, options);\n        }\n        setError(undefined);\n        setUser(user);\n        setAuthenticated(true);\n        startTokenWatch();\n    }, []);\n    const memoData = useMemo(() => ({\n        authenticated,\n        loading,\n        error,\n        user,\n        cbParams,\n        client,\n        logout,\n        getToken,\n        setFlowComplete,\n    }), [\n        authenticated,\n        loading,\n        error,\n        user,\n        cbParams,\n        client,\n        logout,\n        getToken,\n        setFlowComplete,\n    ]);\n    return (_jsx(AuthContext.Provider, { value: memoData, children: _jsx(_Fragment, { children: children }) }));\n};\nexport const useComponentAuth = () => {\n    return useContext(AuthContext);\n};\n","export var FlowStep;\n(function (FlowStep) {\n    FlowStep[\"START\"] = \"start\";\n    FlowStep[\"SIGNUP\"] = \"signup\";\n    FlowStep[\"SIGNUP_PASSWORD\"] = \"signup/password\";\n    FlowStep[\"SIGNUP_SOCIAL\"] = \"signup/social\";\n    FlowStep[\"VERIFY_SOCIAL\"] = \"verify/social\";\n    FlowStep[\"VERIFY_PASSWORD\"] = \"verify/password\";\n    FlowStep[\"VERIFY_CAPTCHA\"] = \"verify/captcha\";\n    FlowStep[\"VERIFY_EMAIL\"] = \"verify/email\";\n    FlowStep[\"ENROLL_MFA_SELECT\"] = \"enroll/mfa/select\";\n    FlowStep[\"ENROLL_MFA_START\"] = \"enroll/mfa/start\";\n    FlowStep[\"ENROLL_MFA_COMPLETE\"] = \"enroll/mfa/complete\";\n    FlowStep[\"VERIFY_MFA_SELECT\"] = \"verify/mfa/select\";\n    FlowStep[\"VERIFY_MFA_START\"] = \"verify/mfa/start\";\n    FlowStep[\"VERIFY_MFA_COMPLETE\"] = \"verify/mfa/complete\";\n    FlowStep[\"RESET_PASSWORD\"] = \"reset/password\";\n    FlowStep[\"MFA_SELECT\"] = \"mfa/select\";\n    FlowStep[\"COMPLETE\"] = \"complete\";\n})(FlowStep || (FlowStep = {}));\n","import axios from \"axios\";\nimport AuthNClient from \"@src/AuthNClient\";\nimport { FlowStep, } from \"./types\";\nconst DEFAULT_FLOW_OPTIONS = {\n    signin: true,\n    signup: true,\n};\nconst DEFAULT_FLOW_STATE = {\n    step: FlowStep.START,\n    flowId: \"\",\n    email: \"\",\n    selectedMfa: \"\",\n    mfaProviders: [],\n    cancelMfa: true,\n    recaptchaKey: \"\",\n    qrCode: \"\",\n    passwordSignup: true,\n    socialSignup: {},\n    verifyProvider: {},\n    redirectUri: \"\",\n};\nconst API_FLOW_BASE = \"flow\";\nexport class AuthNFlowClient extends AuthNClient {\n    constructor(config, options) {\n        super(config);\n        this.options = {\n            ...DEFAULT_FLOW_OPTIONS,\n            ...options,\n        };\n        this.state = {\n            ...DEFAULT_FLOW_STATE,\n        };\n    }\n    initState(flowState) {\n        this.state = {\n            ...this.state,\n            ...flowState,\n        };\n    }\n    /*\n      Auth Flow functions\n    */\n    async start(data) {\n        const path = `${API_FLOW_BASE}/${FlowStep.START}`;\n        const flowTypes = [];\n        if (this.options.signup) {\n            flowTypes.push(\"signup\");\n        }\n        if (this.options.signin) {\n            flowTypes.push(\"signin\");\n        }\n        const payload = {\n            cb_uri: this.config.callbackUri,\n            flow_types: flowTypes,\n        };\n        if (data.email) {\n            payload.email = data.email;\n        }\n        const { success, response } = await this.post(path, payload, false);\n        if (success) {\n            // only update to the next step for 'start' calls with an email\n            if (payload.email) {\n                this.state.step = response.result?.next_step;\n                this.state.email = payload.email;\n                // if email is signed up using social, save the provider info\n                if (response.result?.verify_social) {\n                    this.state.verifyProvider = { ...response.result?.verify_social };\n                }\n            }\n            else {\n                // store configured signup methods\n                if (response.result?.signup?.password_signup === null) {\n                    this.state.passwordSignup = true;\n                }\n                if (response.result?.signup?.social_signup) {\n                    this.state.socialSignup = { ...response.result.signup.social_signup };\n                }\n            }\n            // store flow_id\n            this.state.flowId = response.result.flow_id;\n            // store recapta key\n            if (response.result?.verify_captcha?.site_key) {\n                this.state.recaptchaKey = response.result.verify_captcha.site_key;\n            }\n        }\n        return { success, response };\n    }\n    async signupPassword(data) {\n        const path = `${API_FLOW_BASE}/${FlowStep.SIGNUP_PASSWORD}`;\n        const payload = {\n            flow_id: this.state.flowId,\n            first_name: data.firstName,\n            last_name: data.lastName,\n            password: data.password,\n        };\n        return await this.post(path, payload);\n    }\n    async signupSocial(data) {\n        const path = `${API_FLOW_BASE}/${FlowStep.SIGNUP_SOCIAL}`;\n        const payload = {\n            flow_id: this.state.flowId,\n            cb_code: data.cbCode,\n            cb_state: data.cbState,\n        };\n        return await this.post(path, payload);\n    }\n    async verifySocial(data) {\n        const path = `${API_FLOW_BASE}/${FlowStep.VERIFY_SOCIAL}`;\n        const payload = {\n            flow_id: this.state.flowId,\n            cb_code: data.cbCode,\n            cb_state: data.cbState,\n        };\n        return await this.post(path, payload);\n    }\n    async verifyPassword(data) {\n        const path = `${API_FLOW_BASE}/${FlowStep.VERIFY_PASSWORD}`;\n        const payload = {\n            flow_id: this.state.flowId,\n        };\n        if (data.reset) {\n            payload.reset = true;\n        }\n        else {\n            payload.password = data.password;\n        }\n        return await this.post(path, payload);\n    }\n    async verifyCaptcha(data) {\n        const path = `${API_FLOW_BASE}/${FlowStep.VERIFY_CAPTCHA}`;\n        const payload = {\n            flow_id: this.state.flowId,\n            code: data.captchaCode,\n        };\n        return await this.post(path, payload);\n    }\n    async verifyEmail(data) {\n        const path = `${API_FLOW_BASE}/${FlowStep.VERIFY_EMAIL}`;\n        const payload = {\n            flow_id: this.state.flowId,\n            cb_code: data.cbCode,\n            cb_state: data.cbState,\n        };\n        return await this.post(path, payload);\n    }\n    async enrollMfaStart(data) {\n        const path = `${API_FLOW_BASE}/${FlowStep.ENROLL_MFA_START}`;\n        const payload = {\n            flow_id: this.state.flowId,\n            mfa_provider: data.mfaProvider,\n        };\n        if (data.mfaProvider === \"sms_otp\" && data.phoneNumber) {\n            payload.phone = data.phoneNumber;\n        }\n        const { success, response } = await this.post(path, payload);\n        if (success) {\n            if (response.result?.enroll_mfa_complete?.totp_secret?.qr_image) {\n                this.state.qrCode =\n                    response.result.enroll_mfa_complete.totp_secret.qr_image;\n            }\n            this.state.step = response.result?.next_step;\n        }\n        return { success, response };\n    }\n    async enrollMfaComplete(data) {\n        const path = `${API_FLOW_BASE}/${FlowStep.ENROLL_MFA_COMPLETE}`;\n        const payload = {\n            flow_id: this.state.flowId,\n        };\n        if (data.cancel) {\n            payload.cancel = true;\n        }\n        else {\n            payload.code = data.code;\n        }\n        return await this.post(path, payload);\n    }\n    async verifyMfaStart(data) {\n        const path = `${API_FLOW_BASE}/${FlowStep.VERIFY_MFA_START}`;\n        const payload = {\n            flow_id: this.state.flowId,\n            mfa_provider: data.mfaProvider,\n        };\n        return await this.post(path, payload);\n    }\n    async verifyMfaComplete(data) {\n        const path = `${API_FLOW_BASE}/${FlowStep.VERIFY_MFA_COMPLETE}`;\n        const payload = {\n            flow_id: this.state.flowId,\n        };\n        if (data.cancel) {\n            payload.cancel = true;\n        }\n        else {\n            payload.code = data.code;\n        }\n        return await this.post(path, payload);\n    }\n    async resetPassword(data) {\n        const path = `${API_FLOW_BASE}/${FlowStep.RESET_PASSWORD}`;\n        const payload = {\n            flow_id: this.state.flowId,\n        };\n        if (data.cancel) {\n            payload.cancel = true;\n        }\n        else {\n            payload.password = data.password;\n            payload.cb_code = data.cbCode;\n            payload.cb_state = data.cbState;\n        }\n        return await this.post(path, payload);\n    }\n    async complete() {\n        const path = `${API_FLOW_BASE}/${FlowStep.COMPLETE}`;\n        const payload = {\n            flow_id: this.state.flowId,\n        };\n        return await this.post(path, payload);\n    }\n    // reset state to default\n    reset() {\n        this.state = {\n            ...DEFAULT_FLOW_STATE,\n        };\n    }\n    /*\n      API Request functions\n    */\n    async post(endpoint, payload, updateState = true) {\n        try {\n            const response = await axios.post(this.getUrl(endpoint), payload, this.getOptions());\n            const success = this.processResponse(response.data, updateState);\n            if (this.state.step === FlowStep.COMPLETE) {\n                return await this.complete();\n            }\n            else if (this.state.step === FlowStep.VERIFY_MFA_START) {\n                return await this.verifyMfaStart({\n                    mfaProvider: this.state.selectedMfa || \"\",\n                });\n            }\n            else if (this.state.step === FlowStep.ENROLL_MFA_START &&\n                this.state.selectedMfa !== \"sms_otp\") {\n                return await this.enrollMfaStart({\n                    mfaProvider: this.state.selectedMfa || \"\",\n                });\n            }\n            return { success, response: response.data };\n        }\n        catch (err) {\n            return { success: false, response: this.getError(err) };\n        }\n    }\n    processResponse(response, updateState = true) {\n        let success = response.status === \"Success\";\n        // update state data if call was sucessful and updateState is true\n        if (success && updateState) {\n            // check for mfaProviders\n            if (response.result?.verify_mfa_start?.mfa_providers) {\n                this.state.mfaProviders =\n                    response.result?.verify_mfa_start?.mfa_providers === null\n                        ? []\n                        : [...response.result.verify_mfa_start.mfa_providers];\n            }\n            else if (response.result?.enroll_mfa_start?.mfa_providers) {\n                this.state.mfaProviders =\n                    response.result?.enroll_mfa_start?.mfa_providers === null\n                        ? []\n                        : [...response.result.enroll_mfa_start.mfa_providers];\n            }\n            // set default mfa if none is set\n            if (!this.state.selectedMfa && this.state.mfaProviders?.length) {\n                this.state.selectedMfa = this.state.mfaProviders[0];\n            }\n            // Handle error in response for invalid OTP code - GEA-4753\n            if (response.result?.error) {\n                success = false;\n            }\n            // set the next step\n            this.state.step = response.result?.next_step;\n        }\n        else if (!success && updateState && response.result?.next_step) {\n            // update the step on error if a step is set\n            this.state.step = response.result.next_step;\n        }\n        return success;\n    }\n}\nexport default AuthNFlowClient;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { createContext, useCallback, useContext, useEffect, useMemo, useState, } from \"react\";\nimport { FlowStep, } from \"./types\";\nimport { useComponentAuth } from \"@src/ComponentAuthProvider\";\nimport AuthNFlowClient from \"./client\";\nconst SESSION_DATA_NAME = \"pangea-authn-flow\";\nexport const AuthFlowContext = createContext({});\nexport const AuthFlowProvider = ({ children }) => {\n    const { client, cbParams, setFlowComplete } = useComponentAuth();\n    const config = {\n        clientToken: client.config.clientToken,\n        domain: client.config.domain,\n        callbackUri: client.config.callbackUri,\n    };\n    const auth = useMemo(() => {\n        return new AuthNFlowClient(config);\n    }, []);\n    const [step, setStep] = useState();\n    const [error, setError] = useState();\n    const [loading, setLoading] = useState(false);\n    const [flowData, setFlowState] = useState({});\n    // load data from local storage, and params from URL\n    useEffect(() => {\n        const sessionData = getSessionData();\n        const initFlowState = {\n            step: sessionData.step || FlowStep.START,\n        };\n        // get callback params from main provider\n        const cbCode = cbParams?.code;\n        const cbState = cbParams?.state;\n        if (sessionData.step) {\n            initFlowState.flowId = sessionData.flow_id;\n            initFlowState.recaptchaKey = sessionData.recaptcha_key;\n            initFlowState.qrCode = sessionData.qr_code;\n            initFlowState.selectedMfa = sessionData.selected_mfa;\n            initFlowState.mfaProviders = sessionData.mfa_providers;\n            initFlowState.email = sessionData.email;\n            setFlowState(initFlowState);\n        }\n        setStep(initFlowState.step);\n        // set auth client state from session\n        auth.initState(initFlowState);\n        /*\n         * Start state and callback handling\n         */\n        // social signup with callback\n        if (initFlowState.step === FlowStep.START &&\n            cbCode &&\n            cbState &&\n            initFlowState.flowId) {\n            callNext(FlowStep.SIGNUP_SOCIAL, { cbCode: cbCode, cbState: cbState });\n        }\n        // fetch social providers\n        else if (initFlowState.step === FlowStep.START) {\n            callNext(FlowStep.START, {});\n        }\n        // social login with callback\n        else if (initFlowState.step === FlowStep.VERIFY_SOCIAL &&\n            cbCode &&\n            cbState) {\n            callNext(FlowStep.VERIFY_SOCIAL, { cbCode: cbCode, cbState: cbState });\n        }\n        // verify email with callback or check if complete\n        else if (initFlowState.step === FlowStep.VERIFY_EMAIL) {\n            callNext(FlowStep.VERIFY_EMAIL, { cbCode: cbCode, cbState: cbState });\n        }\n        // eslint-disable-next-line\n    }, []);\n    const callNext = useCallback(async (step, payload) => {\n        setLoading(true);\n        switch (step) {\n            case FlowStep.START:\n                startHandler(payload);\n                break;\n            case FlowStep.SIGNUP_PASSWORD:\n                signupPasswordHandler(payload);\n                break;\n            case FlowStep.SIGNUP_SOCIAL:\n                signupSocialHandler(payload);\n                break;\n            case FlowStep.VERIFY_PASSWORD:\n                verifyPasswordHandler(payload);\n                break;\n            case FlowStep.VERIFY_SOCIAL:\n                verifySocialHandler(payload);\n                break;\n            case FlowStep.VERIFY_EMAIL:\n                verifyEmailHandler(payload);\n                break;\n            case FlowStep.VERIFY_CAPTCHA:\n                verifyCaptchaHandler(payload);\n                break;\n            case FlowStep.ENROLL_MFA_START:\n                enrollMfaStartHandler(payload);\n                break;\n            case FlowStep.ENROLL_MFA_COMPLETE:\n                enrollMfaCompleteHandler(payload);\n                break;\n            case FlowStep.VERIFY_MFA_START:\n                verifyMfaStartHandler(payload);\n                break;\n            case FlowStep.VERIFY_MFA_COMPLETE:\n                verifyMfaCompleteHandler(payload);\n                break;\n            case FlowStep.RESET_PASSWORD:\n                resetPasswordHandler(payload);\n                break;\n            case FlowStep.ENROLL_MFA_SELECT:\n                auth.state.cancelMfa = payload.cancel;\n                setNextStep(FlowStep.ENROLL_MFA_SELECT);\n                break;\n            case FlowStep.VERIFY_MFA_SELECT:\n                auth.state.cancelMfa = payload.cancel;\n                setNextStep(FlowStep.VERIFY_MFA_SELECT);\n                break;\n            default:\n                // invalid state\n                console.log(\"Invalid Flow State\", step);\n        }\n        setLoading(false);\n        // eslint-disable-next-line\n    }, [flowData]);\n    const getSessionData = () => {\n        const storedData = localStorage.getItem(SESSION_DATA_NAME);\n        if (storedData) {\n            const session = JSON.parse(storedData);\n            return session;\n        }\n        return {};\n    };\n    const updateSessionData = useCallback((data) => {\n        const sessionData = getSessionData();\n        sessionData.step = data.step;\n        sessionData.flow_id = data.flowId;\n        sessionData.email = data.email;\n        sessionData.selected_mfa = data.selectedMfa;\n        sessionData.mfa_providers = data.mfaProviders;\n        sessionData.recaptcha_key = data.recaptchaKey;\n        sessionData.qr_code = data.qrCode;\n        const dataString = JSON.stringify(sessionData);\n        localStorage.setItem(SESSION_DATA_NAME, dataString);\n    }, []);\n    const deleteSessionData = () => {\n        localStorage.removeItem(SESSION_DATA_NAME);\n    };\n    const startHandler = async (payload) => {\n        const { success, response } = await auth.start(payload);\n        updateFlowState(success, response);\n    };\n    const signupPasswordHandler = async (payload) => {\n        const { success, response } = await auth.signupPassword(payload);\n        updateFlowState(success, response);\n    };\n    const signupSocialHandler = async (payload) => {\n        const { success, response } = await auth.signupSocial(payload);\n        updateFlowState(success, response);\n    };\n    const verifyPasswordHandler = async (payload) => {\n        const { success, response } = await auth.verifyPassword(payload);\n        updateFlowState(success, response);\n    };\n    const verifySocialHandler = async (payload) => {\n        const { success, response } = await auth.verifySocial(payload);\n        updateFlowState(success, response);\n    };\n    const verifyEmailHandler = async (payload) => {\n        const { success, response } = await auth.verifyEmail(payload);\n        updateFlowState(success, response);\n    };\n    const verifyCaptchaHandler = async (payload) => {\n        const { success, response } = await auth.verifyCaptcha(payload);\n        updateFlowState(success, response);\n    };\n    const enrollMfaStartHandler = async (payload) => {\n        const { success, response } = await auth.enrollMfaStart(payload);\n        updateFlowState(success, response);\n    };\n    const enrollMfaCompleteHandler = async (payload) => {\n        // set provider when cancelling, to support changing providers\n        if (payload.cancel && payload.mfaProvider) {\n            auth.state.selectedMfa = payload.mfaProvider;\n        }\n        const { success, response } = await auth.enrollMfaComplete(payload);\n        updateFlowState(success, response);\n    };\n    const verifyMfaStartHandler = async (payload) => {\n        const { success, response } = await auth.verifyMfaStart(payload);\n        updateFlowState(success, response);\n    };\n    const verifyMfaCompleteHandler = async (payload) => {\n        // set provider when cancelling, to support changing providers\n        if (payload.cancel && payload.mfaProvider) {\n            auth.state.selectedMfa = payload.mfaProvider;\n        }\n        const { success, response } = await auth.verifyMfaComplete(payload);\n        updateFlowState(success, response);\n    };\n    const resetPasswordHandler = async (payload) => {\n        if (!payload.cancel) {\n            payload.cbCode = cbParams?.code;\n            payload.cbState = cbParams?.state;\n        }\n        const { success, response } = await auth.resetPassword(payload);\n        updateFlowState(success, response);\n    };\n    /*\n      Set flow step without an API call\n    */\n    const setNextStep = (nextStep) => {\n        auth.state.step = nextStep;\n        setStep(auth.state.step);\n        setFlowState({ ...auth.state });\n        updateSessionData(auth.state);\n    };\n    const reset = useCallback(() => {\n        auth.reset();\n        setError(undefined);\n        callNext(FlowStep.START, {});\n    }, [auth, callNext]);\n    /*\n      Common response utility\n    */\n    const updateFlowState = (success, response) => {\n        if (success) {\n            setError(undefined);\n            setStep(auth.state.step);\n            setFlowState({ ...auth.state });\n            if (auth.state.step === undefined &&\n                response.result?.active_token?.token) {\n                deleteSessionData();\n                setFlowComplete(response);\n            }\n            else {\n                updateSessionData(auth.state);\n            }\n        }\n        else {\n            setError(response);\n            console.log(\"Error\", response);\n        }\n    };\n    const memoData = useMemo(() => ({\n        step,\n        error,\n        loading,\n        flowData,\n        callNext,\n        reset,\n        cbParams,\n    }), [step, error, loading, flowData, callNext, reset, cbParams]);\n    return (_jsx(AuthFlowContext.Provider, { value: memoData, children: children }));\n};\nexport const useAuthFlow = () => {\n    return useContext(AuthFlowContext);\n};\n"],"names":["AuthNClient","constructor","config","useJwt","clientToken","Error","domain","callbackUri","window","location","origin","this","async","userToken","data","token","post","payload","code","refreshToken","user_token","refresh_token","endpoint","response","axios","getUrl","getOptions","success","status","err","getError","match","headers","Authorization","error","message","summary","result","isAxiosError","request","statusText","reqest","console","log","_arrayReduce","array","iteratee","accumulator","initAccum","index","length","_deburrLetter","object","key","undefined","basePropertyOf","freeGlobal","global","Object","freeSelf","self","_Symbol","Function","Symbol","_arrayMap","Array","isArray_1","isArray","require$$0","objectProto","prototype","hasOwnProperty","nativeObjectToString","toString","symToStringTag","toStringTag","_getRawTag","value","isOwn","call","tag","unmasked","e","getRawTag","require$$1","objectToString","baseGetTag","isObjectLike","arrayMap","require$$2","isSymbol","symbolProto","symbolToString","_baseToString","baseToString","toString_1","deburrLetter","reLatin","reComboMark","RegExp","deburr_1","string","replace","reAsciiWord","_asciiWords","reHasUnicodeWord","_hasUnicodeWord","test","rsBreakRange","rsMathOpRange","rsBreak","rsDigits","rsDingbat","rsLower","rsMisc","rsRegional","rsSurrPair","rsUpper","rsMiscLower","rsMiscUpper","reOptMod","rsModifier","rsSeq","join","rsEmoji","reUnicodeWord","asciiWords","hasUnicodeWord","unicodeWords","arrayReduce","deburr","words","pattern","guard","reApos","snakeCase_1","callback","createCompounder","word","toLowerCase","BASE58_ALPHABET","generateBase58","setLength","i","charAt","Math","floor","random","encode58","source","TextEncoder","encode","Uint8Array","split","map","c","charCodeAt","x","BigInt","uint8a","hex","padStart","bytesToHex","output","mod","Number","push","reverse","toUrlEncoded","obj","keys","k","encodeURIComponent","snakeCase","diffInSeconds","dt1","dt2","diff","getTime","round","DEFAULT_COOKIE_OPTIONS","useCookie","cookieMaxAge","cookieName","refreshCookieName","CODE_RE","STATE_RE","hasAuthParams","searchParams","search","getStorageAPI","isUsingCookies","sessionStorage","localStorage","saveSessionData","options","storageAPI","dataString","JSON","stringify","setItem","sessionKey","getSessionData","getItem","parse","getSessionToken","getTokenFromCookie","user","active_token","getAllTokens","sessionToken","getRefreshToken","getSessionTokenValues","getTokenCookieFields","expire","name","cookie","getCookies","isTokenExpiring","expireTime","refreshExpires","Date","REFRESH_CHECK_INTERVAL","maybeAddSecureFlag","cookieDomain","hostname","document","str","trim","reduce","cookieObj","curr","cookieValue","setCookie","removeCookie","toUTCString","setTokenCookies","userData","userCookieValue","refreshCookieValue","removeTokenCookies","getUserFromResponse","activeToken","email","profile","useValidateToken","client","validateCallback","fetchJWKS","useCallback","jwks","warn","checkKeys","jwksJSON","cacheExpires","getJWKS","jwksData","keySet","cacheData","now","verifyJwt","jose","createLocalJWKSet","protectedHeader","jwtVerify","first_name","last_name","phone","header","verifyToken","validate","useRefresh","refreshCallback","loadingCallback","intervalId","useRef","useEffect","addEventListener","onFocus","onBlur","removeEventListener","current","clearInterval","checkTokenLife","startTokenWatch","tokenExpire","_","getTokenExpire","refresh","stopTokenWatch","setInterval","AuthContext","createContext","AuthProvider","loginUrl","onLogin","cookieOptions","redirectPathname","redirectOnLogout","useStrictStateCheck","children","authenticated","setAuthenticated","useState","loading","setLoading","setError","setUser","useMemo","slashRe","loginURL","signupURL","logoutURL","sessionData","appState","returnPath","pathname","logout","state","exchange","queryString","urlParams","URLSearchParams","savedState","get","delete","newSearch","newPath","history","pushState","title","userinfo","processLogin","removeItem","login","stateCode","redirectUri","query","append","queryParams","redirectTo","url","setLoggedOut","getToken","authState","memoData","_jsx","Provider","_Fragment","useAuth","useContext","ComponentAuthProvider","cbParams","setCbParams","setFlowComplete","useComponentAuth","FlowStep","DEFAULT_FLOW_OPTIONS","signin","signup","DEFAULT_FLOW_STATE","step","START","flowId","selectedMfa","mfaProviders","cancelMfa","recaptchaKey","qrCode","passwordSignup","socialSignup","verifyProvider","AuthNFlowClient","super","initState","flowState","path","flowTypes","cb_uri","flow_types","next_step","verify_social","password_signup","social_signup","flow_id","verify_captcha","site_key","SIGNUP_PASSWORD","firstName","lastName","password","SIGNUP_SOCIAL","cb_code","cbCode","cb_state","cbState","VERIFY_SOCIAL","VERIFY_PASSWORD","reset","VERIFY_CAPTCHA","captchaCode","VERIFY_EMAIL","ENROLL_MFA_START","mfa_provider","mfaProvider","phoneNumber","enroll_mfa_complete","totp_secret","qr_image","ENROLL_MFA_COMPLETE","cancel","VERIFY_MFA_START","VERIFY_MFA_COMPLETE","RESET_PASSWORD","COMPLETE","updateState","processResponse","complete","verifyMfaStart","enrollMfaStart","verify_mfa_start","mfa_providers","enroll_mfa_start","AuthFlowContext","AuthFlowProvider","auth","setStep","flowData","setFlowState","initFlowState","recaptcha_key","qr_code","selected_mfa","callNext","startHandler","signupPasswordHandler","signupSocialHandler","verifyPasswordHandler","verifySocialHandler","verifyEmailHandler","verifyCaptchaHandler","enrollMfaStartHandler","enrollMfaCompleteHandler","verifyMfaStartHandler","verifyMfaCompleteHandler","resetPasswordHandler","ENROLL_MFA_SELECT","setNextStep","VERIFY_MFA_SELECT","storedData","updateSessionData","start","updateFlowState","signupPassword","signupSocial","verifyPassword","verifySocial","verifyEmail","verifyCaptcha","enrollMfaComplete","verifyMfaComplete","resetPassword","nextStep","useAuthFlow"],"mappings":"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"}